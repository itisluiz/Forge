<div class="select-project-container">
	<div class="select-project-component">
		<div class="title">
			<div class="left-side">
				<h1>Please select your project</h1>
				<p>To have access to the management process, choose one project</p>
			</div>

			<div class="right-side">
				<button id="join" (click)="openPopUp('join')">Join</button>
				<button mat-icon-button [matMenuTriggerFor]="menu">
					<mat-icon>more_vert</mat-icon>
				</button>
				<mat-menu #menu="matMenu">
					<button mat-menu-item>
						<span (click)="openPopUp('create')">Create a project</span>
					</button>
				</mat-menu>
			</div>
		</div>

		<div class="projects">
			<div class="header">
				<span>Projects</span>
				<span>Total: {{ dataSource.length }}</span>
			</div>

			<div class="list">
				<div *ngFor="let project of dataSource">
					<div class="project-info">
						<p>{{ project.title }}:</p>
						<span>{{ project.code }}</span>
						<button class="button-icon" mat-icon-button [matMenuTriggerFor]="project_menu" #menuTrigger="matMenuTrigger">
							<mat-icon>more_vert</mat-icon>
						</button>
						<mat-menu #project_menu="matMenu">
							<button mat-menu-item>
								<span>Edit information</span>
							</button>
							<button mat-menu-item>
								<span (click)="openPopUp('invite')">Invite a person</span>
							</button>
							<button mat-menu-item>
								<span>Leave project</span>
							</button>
							<button mat-menu-item>
								<span>Delete project</span>
							</button>
						</mat-menu>
					</div>
				</div>
			</div>

			<button class="footer-next">Next</button>
		</div>
	</div>
	<p class="copyright">All content Â© 2024 Forge. Unauthorized reproduction or distribution is prohibited.</p>
</div>

@if (popUpJoin) {
	<app-popup-component
		title="Join in a project"
		description="Enter your project's code to get access to the project."
		buttonName="Join"
		(closePopUpEmitter)="closePopUp('join')"
		(onButtonClick)="handleButtonClick('join')"
	>
		<app-input
			#projectJoin
			[errorMessage]="projectCodeError"
			for="code"
			label="Code"
			name="code"
			type="text"
			placeholder="Enter your code"
		></app-input>
	</app-popup-component>
}

@if (popUpCreateProject) {
	<app-popup-component
		title="Create a new project"
		description="Enter the information of your project."
		buttonName="Create"
		(closePopUpEmitter)="closePopUp('create')"
		(onButtonClick)="handleButtonClick('create')"
	>
		<app-input
			#projectTitleCreate
			for="title"
			label="Title"
			name="title"
			type="text"
			placeholder="Title of your project"
		></app-input>

		<app-input
			#projectDescriptionCreate
			for="description"
			label="Description"
			name="description"
			type="text"
			placeholder="Description of your project"
		></app-input>

		<app-input
			#projectCodeCreate
			[errorMessage]="projectCreateError"
			for="code"
			label="Code"
			name="code"
			type="text"
			placeholder="Enter your project code"
		></app-input>
	</app-popup-component>
}

@if (popUpInvite) {
	<app-popup-component
		[title]="'Invite a person to ' + projectName"
		buttonName="Make an invitation"
		(closePopUpEmitter)="closePopUp('invite')"
		(onButtonClick)="handleButtonClick('invite')"
	>
		<app-input
			[errorMessage]="projectCodeError"
			for="quantity"
			label="Uses quantity"
			name="quantity"
			type="number"
			placeholder="Number of uses"
		></app-input>

		<app-input
			[errorMessage]="projectCodeError"
			for="duration"
			label="Duration"
			name="duration"
			type="number"
			placeholder="Number of hours"
		></app-input>

		<app-input
			[errorMessage]="projectCodeError"
			for="role"
			label="Role"
			name="role"
			type="text"
			placeholder="Role of invite (e.g. Developer)"
		></app-input>
	</app-popup-component>
}
